@using Medium_Assignment.Models

@model EmployeeIndexViewModel
@{
    ViewBag.Title = "New";
}

<h2>Employees</h2>

<p>

    @Html.ActionLink("New Employee", "New", "Employee", new { @class = "btn btn-primary" })

</p>


<table id="Organizations" class="table table-bordered table-hover">
    <thead>
        <tr>
            <th scope="col">First Name </th>
            <th scope="col">Last Name</th>
            <th scope="col">Date of Birth</th>
            <th scope="col">Gender</th>
            <th scope="col">Designation</th>
            <th scope="col">Date of Joining</th>
            <th scope="col">Department</th>
            <th scope="col">Address</th>
            <th scope="col">Country</th>
            <th scope="col">State</th>
            <th scope="col">City</th>
            <th scope="col">EmployeeType</th>
            <th scope="col">Status</th>
            <th scope="col">User Name</th>
            <th scope="col">Phone Number</th>
            <th scope="col">Email</th>
            <th scope="col">Actions</th>

        </tr>
    </thead>
    <tbody>

        @foreach (var employee in Model.Employees)
        {
        <tr class="table-active">

            <td>@employee.FirstName</td>
            <td>@employee.LastName</td>
            <td>@employee.DOB</td>
            <td>@employee.Gender</td>
            <td>@employee.Designation</td>
            <td>@employee.DOJ</td>
            <td>@employee.Department.Name</td>
            @if (!String.IsNullOrEmpty(employee.Address2))
            {
                <td> @(employee.Address1 + ", " + employee.Address2)</td>
            }
            else
            {
                <td> @(employee.Address1)</td>

            }
            <td>@employee.Country.Name</td>
            <td>@employee.State.Name</td>
            <td>@employee.City.Name</td>
            <td>@employee.EmployeeType</td>
            <td>@employee.Status</td>
            <td>@employee.ApplicationUser.UserName</td>
            <td>@employee.ApplicationUser.PhoneNumber</td>
            <td>@employee.ApplicationUser.Email</td>
            <td>

                <p>
                    @Html.ActionLink("Details", "Details", "Employee", new { Id = employee.Id }, new { @class = "btn btn-primary" })
                </p>

                <p>
                    @Html.ActionLink("Edit", "Edit", "Employee", new { Id = employee.Id }, new { @class = "btn btn-primary" })

                </p>

                <p>
                    @Html.ActionLink("Delete", "Delete", "Employee", new { Id = employee.Id }, new { @class = "btn btn-primary delete" })

                </p>

            </td>


        </tr>

        }




    </tbody>
</table>


@Scripts.Render("~/bundles/lib")
@Scripts.Render("~/bundles/jqueryval")


<script>


    $(document).ready(function () {
        $("#Employees").DataTable()

        $(".delete").click(function (event) {
            if (!confirm("Are you sure you want to delete this employee?")) {
                event.preventDefault()
            }

        });
    });


</script>

